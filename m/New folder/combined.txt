#include <GL/glut.h>
#include <iostream>
#include <cmath>
using namespace std;

// POINTS (user input)
int x1_, y1_, x2_, y2_, x3_, y3_;

// LINE FUNCTION
void drawLineGL(int x0, int y0, int x1, int y1) {
    glBegin(GL_LINES);
    glVertex2i(x0, y0);
    glVertex2i(x1, y1);
    glEnd();
}

// TRIANGLE FUNCTION
void drawTriangle(int x1, int y1, int x2, int y2, int x3, int y3) {
    drawLineGL(x1, y1, x2, y2);
    drawLineGL(x2, y2, x3, y3);
    drawLineGL(x3, y3, x1, y1);
}

// TRANSLATION
void translate(int &x, int &y, int tx, int ty) {
    x += tx;
    y += ty;
}

// SCALING
void scale(int &x, int &y, float sx, float sy, int cx, int cy) {
    x = cx + (x - cx) * sx;
    y = cy + (y - cy) * sy;
}

// ROTATION
void rotatePoint(int &x, int &y, float angleDeg, int cx, int cy) {
    float angleRad = angleDeg * M_PI / 180.0;
    int dx = x - cx;
    int dy = y - cy;
    x = cx + dx * cos(angleRad) - dy * sin(angleRad);
    y = cy + dx * sin(angleRad) + dy * cos(angleRad);
}

// REFLECTION
void reflectXY(int &x, int &y, int cx, int cy) {
    x = cx - (x - cx);
    y = cy - (y - cy);
}

// SHEARING
void shear(int &x, int &y, float shx, float shy, int cx, int cy) {
    int dx = x - cx;
    int dy = y - cy;
    int newX = dx + shx * dy;
    int newY = dy + shy * dx;
    x = cx + newX;
    y = cy + newY;
}

void display() {
    glClear(GL_COLOR_BUFFER_BIT);

    // ORIGINAL TRIANGLE
    glColor3f(1, 1, 1);
    drawTriangle(x1_, y1_, x2_, y2_, x3_, y3_);

    // CENTER OF TRIANGLE
    int cx = (x1_ + x2_ + x3_) / 3;
    int cy = (y1_ + y2_ + y3_) / 3;

    // COPIES
    int a1, b1, a2, b2, a3, b3;

    // TRANSLATION
    a1 = x1_, b1 = y1_;
    a2 = x2_, b2 = y2_;
    a3 = x3_, b3 = y3_;
    translate(a1, b1, 120, 40);
    translate(a2, b2, 120, 40);
    translate(a3, b3, 120, 40);
    glColor3f(1, 0, 0);
    drawTriangle(a1, b1, a2, b2, a3, b3);

    // SCALING
    a1 = x1_, b1 = y1_;
    a2 = x2_, b2 = y2_;
    a3 = x3_, b3 = y3_;
    scale(a1, b1, 1.4, 1.4, cx, cy);
    scale(a2, b2, 1.4, 1.4, cx, cy);
    scale(a3, b3, 1.4, 1.4, cx, cy);
    glColor3f(0, 1, 0);
    drawTriangle(a1, b1, a2, b2, a3, b3);

    // ROTATION
    a1 = x1_, b1 = y1_;
    a2 = x2_, b2 = y2_;
    a3 = x3_, b3 = y3_;
    rotatePoint(a1, b1, 45, cx, cy);
    rotatePoint(a2, b2, 45, cx, cy);
    rotatePoint(a3, b3, 45, cx, cy);
    glColor3f(0, 0, 1);
    drawTriangle(a1, b1, a2, b2, a3, b3);

    // REFLECTION
    a1 = x1_, b1 = y1_;
    a2 = x2_, b2 = y2_;
    a3 = x3_, b3 = y3_;
    reflectXY(a1, b1, cx, cy);
    reflectXY(a2, b2, cx, cy);
    reflectXY(a3, b3, cx, cy);
    glColor3f(1, 0, 1);
    drawTriangle(a1, b1, a2, b2, a3, b3);

    // SHEARING
    a1 = x1_, b1 = y1_;
    a2 = x2_, b2 = y2_;
    a3 = x3_, b3 = y3_;
    shear(a1, b1, 0.5, 0.0, cx, cy);
    shear(a2, b2, 0.5, 0.0, cx, cy);
    shear(a3, b3, 0.5, 0.0, cx, cy);
    glColor3f(0, 1, 1);
    drawTriangle(a1, b1, a2, b2, a3, b3);

    glFlush();
}

void init() {
    glClearColor(0, 0, 0, 1);
    gluOrtho2D(0, 500, 0, 500);
}

int main(int argc, char **argv) {

    cout << "Enter x1 y1: ";
    cin >> x1_ >> y1_;

    cout << "Enter x2 y2: ";
    cin >> x2_ >> y2_;

    cout << "Enter x3 y3: ";
    cin >> x3_ >> y3_;

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(500, 500);
    glutCreateWindow("Combined Transformations - User Input");

    init();
    glutDisplayFunc(display);
    glutMainLoop();
    return 0;
}
